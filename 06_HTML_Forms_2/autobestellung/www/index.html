<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autobestellung Ford</title>
    <link rel="Stylesheet" type="Text/CSS" href="./style/style.css">
    <link rel="icon" type="image/x-icon" href="./media/favicon.ico">
</head>

<body>
    <div class="header">
        <img src="./media/Ford_logo_flat.svg" alt="Ford Logo" style="width: 150px; margin-right: 20px;">
        <h1>Auto bestellen</h1>
    </div>

    <div class="formContainer">
        <form id="orderForm" action="https://wmc-forms.manolol.xyz/json" method="post">
            <label for="model">Modell: </label>
            <!-- Hinweis: Ein Eingabefeld wird durch das "autofocus"-attribut zu Beginn fokusiert. Nachdem das in diesem Fall nicht schön aussieht, habe ich das nicht gemacht. -->
            <select id="model" name="model" class="formElement" required>
                <option value="kuga">Kuga</option>
                <option value="puma">Puma</option>
                <option value="focus">Focus</option>
                <option value="tourneo-custom">Tourneo Custom</option>
                <option value="tourneo-courier">Tourneo Courier</option>
                <option value="tourneo-connect">Tourneo Connect</option>
                <option value="explorer">Explorer</option>
                <option value="mustang">Mustang</option>
                <option value="transit">Transit</option>
                <option value="capri">Capri</option>
            </select> <br>

            <div class="formElement radioButtons">
                <label>Antrieb:</label>
                <div class="radioButtonContainer">
                    <input type="radio" id="gasoline" name="engine-type" value="gasoline" checked required>
                    <label for="gasoline">Benzin</label>
                </div>
                <div class="radioButtonContainer">
                    <input type="radio" id="diesel" name="engine-type" value="diesel" required>
                    <label for="diesel">Diesel</label>
                </div>
                <div class="radioButtonContainer">
                    <input type="radio" id="electric" name="engine-type" value="electric" required>
                    <label for="electric">Elektrisch</label>
                </div>
                <div class="radioButtonContainer">
                    <input type="radio" id="hybrid" name="engine-type" value="hybrid" required>
                    <label for="hybrid">Hybrid</label>
                </div>
            </div>

            <div class="formElement">
                <label for="power">Leisung (PS):</label>
                <input type="range" id="power" name="power" min="100" max="400" value="250">
                <span id="powerValue">250</span>
            </div>

            <div class="formElement">
                <button type="submit" style="margin-right: 8px;">Fahrzeug anfragen</button>
                <button type="reset" onclick="resetElements()">Formular zurücksetzen</button>
            </div>
        </form>

        <img src="./media/cars/kuga.png" alt="Ford Kuga" id="carImage">
    </div>

    <script>
        //const availabeCars = ['kuga', 'capri', 'explorer', 'focus', 'mustang', 'puma', 'tourneo-connect', 'tourneo-courier', 'tourneo-custom'];

        let carImage, powerSlider, powerValue, form, modelSelector;

        document.addEventListener('DOMContentLoaded', (event) => {
            powerSlider = document.getElementById('power');
            powerValue = document.getElementById('powerValue');
            form = document.getElementById('orderForm');
            modelSelector = document.getElementById('model');
            carImage = document.getElementById('carImage');

            // update once to ensure correct values (e.g. after reload)
            setTimeout(() => {
                updateCarImage();
                updatePowerText();
            }, 1)

            // update powerValue text when slider value changed
            powerSlider.addEventListener('input', updatePowerText);

            // update carImage when different model is selected
            modelSelector.addEventListener('input', updateCarImage);

            // update powerValue text and carImage when form is reset
            form.addEventListener('reset', () => {
                // Delay the update to allow the form to reset first
                setTimeout(() => {
                    updatePowerText();
                    updateCarImage();
                }, 1);
            });
        });

        function updatePowerText() {
            powerValue.textContent = powerSlider.value;
        }

        function updateCarImage() {
            let modelName = modelSelector.value;
            carImage.src = `./media/cars/${modelName}.png`;
            carImage.alt = `Ford ${modelName.charAt(0).toUpperCase() + modelName.slice(1)}`;
        }
    </script>
</body>

</html>